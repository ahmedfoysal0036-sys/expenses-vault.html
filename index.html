<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ahmed Faisal | Protocol Vault</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        :root { --sky-white: #f0f9ff; --sky-blue: #0ea5e9; --orange: #f97316; --dark-bg: #0f172a; }
        body { font-family: 'Rajdhani', sans-serif; background-color: var(--sky-white); overflow-x: hidden; }
        .hacker-font { font-family: 'Orbitron', sans-serif; }
        
        .sidebar { 
            width: 100px; height: 95vh; position: fixed; left: 15px; top: 2.5vh; 
            background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(15px);
            display: flex; flex-direction: column; align-items: center; 
            padding: 30px 0; gap: 20px; z-index: 50; 
            border-radius: 30px; border: 1px solid rgba(34, 211, 238, 0.3);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .nav-box {
            width: 80px; height: 80px; display: flex; flex-direction: column;
            justify-content: center; align-items: center; border-radius: 20px;
            background: white; border: 2px solid #e0f2fe; transition: all 0.5s ease;
            cursor: pointer; position: relative; overflow: hidden;
        }

        .nav-box:hover { transform: scale(1.15); border-color: #22d3ee; box-shadow: 0 10px 20px rgba(34, 211, 238, 0.2); }
        .icon { font-size: 24px; }
        .nav-text { font-size: 10px; font-weight: bold; margin-top: 5px; color: #0ea5e9; text-transform: uppercase; }

        .glass-card { background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(10px); border: 1px solid rgba(14, 165, 233, 0.2); border-radius: 30px; }
        .round-box { border-radius: 20px; }
        @media print { .sidebar, .no-print { display: none !important; } }
    </style>
</head>
<body id="app-body">

    <div id="page-1" class="min-h-screen flex flex-col items-center justify-center p-6 text-center">
        <h1 id="greeting" class="hacker-font text-2xl text-sky-600 mb-8 h-10"></h1>
        <div class="glass-card p-10 shadow-2xl max-w-2xl border-b-4 border-orange-500">
            <div class="grid grid-cols-2 gap-6 mb-8">
                <div class="p-6 bg-white round-box shadow-inner"><img src="https://cdn-icons-png.flaticon.com/512/2091/2091584.png" class="w-16 mx-auto mb-2 animate-bounce"><span class="font-bold text-sky-600">VAULT</span></div>
                <div class="p-6 bg-white round-box shadow-inner"><img src="https://cdn-icons-png.flaticon.com/512/4341/4341731.png" class="w-16 mx-auto mb-2"><span class="font-bold text-orange-500">PROTOCOL</span></div>
            </div>
            <button onclick="navToPage(2)" class="bg-sky-500 hover:bg-orange-500 text-white px-10 py-4 rounded-full font-bold text-xl flex items-center gap-3 mx-auto transition-all">GO TO VAULT ‚ûî</button>
        </div>
        <p class="mt-10 text-gray-400 font-bold tracking-widest uppercase">Created by Ahmed Faisal</p>
    </div>

    <div id="page-2" class="hidden min-h-screen pl-32 pr-6 py-10">
        <div class="sidebar shadow-2xl">
            <div class="nav-box" onclick="showSection('bazar')">
                <span class="icon">üõí</span><span class="nav-text">Bazar</span>
            </div>
            <div class="nav-box" onclick="showSection('locker')">
                <span class="icon">üîí</span><span class="nav-text">Locker</span>
            </div>
            <div class="nav-box" onclick="showSection('reports')">
                <span class="icon">üìä</span><span class="nav-text">Report</span>
            </div>
            <div class="nav-box mt-auto bg-red-100" onclick="navToPage(1)">
                <span class="icon">üö™</span><span class="nav-text" style="color:red">Exit</span>
            </div>
        </div>

        <div class="max-w-6xl mx-auto">
            <div id="bazar-section" class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-2 glass-card p-8 shadow-xl">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-bold text-sky-700">üõí Expense Tracking</h3>
                        <div class="flex gap-2">
                            <input type="number" id="total-earn" placeholder="Salary" class="p-2 round-box border border-sky-300 w-32 outline-none">
                            <button onclick="updateEarn()" class="bg-orange-500 text-white px-4 py-2 round-box text-sm font-bold">SET EARN</button>
                        </div>
                    </div>
                    
                    <div class="overflow-y-auto max-h-[400px] mb-6">
                        <table class="w-full text-left">
                            <thead class="text-sky-600 border-b">
                                <tr><th class="py-2">Item</th><th>Qty</th><th>Price</th><th>Total</th><th>Action</th></tr>
                            </thead>
                            <tbody id="item-list" class="text-gray-700"></tbody>
                        </table>
                    </div>
                    
                    <div class="bg-sky-50 p-6 round-box grid grid-cols-1 md:grid-cols-4 gap-3 no-print">
                        <input type="text" id="custom-item-name" placeholder="Item Name" class="p-3 round-box border border-sky-200 outline-none">
                        <input type="number" id="new-item-qty" placeholder="Qty" class="p-3 round-box border border-sky-200 outline-none">
                        <input type="number" id="new-item-price" placeholder="Price" class="p-3 round-box border border-sky-200 outline-none">
                        <button onclick="addNewItem()" class="bg-sky-600 text-white px-4 py-3 round-box font-bold hover:bg-orange-500 transition">üöÄ ADD</button>
                    </div>
                </div>

                <div class="space-y-6">
                    <div class="glass-card p-8 bg-sky-600 text-white text-center shadow-lg">
                        <p class="text-lg opacity-80">Remaining Balance</p>
                        <h4 id="balance-display" class="text-4xl font-bold hacker-font">‡ß≥ 0.00</h4>
                    </div>
                    <div class="glass-card p-8 text-center border-t-4 border-sky-500 bg-white shadow-lg">
                        <p class="font-bold text-gray-500">Total Expenses</p>
                        <h4 id="total-expense-display" class="text-3xl font-bold text-orange-600 hacker-font">‡ß≥ 0.00</h4>
                    </div>
                </div>
            </div>

            <div id="locker-section" class="hidden glass-card p-10 max-w-2xl mx-auto text-center shadow-2xl">
                <h3 class="text-2xl font-bold text-sky-700 mb-6 hacker-font">üîí Protocol Note Locker</h3>
                <div id="lock-screen">
                    <input type="password" id="lock-pass" maxlength="4" placeholder="PIN" class="p-5 w-48 round-box border-2 border-sky-300 text-center text-3xl mb-6 block mx-auto">
                    <button onclick="unlock()" class="bg-sky-600 text-white px-12 py-3 round-box font-bold">UNLOCK</button>
                </div>
                <div id="lock-content" class="hidden">
                    <textarea id="private-note" class="w-full h-64 p-6 round-box border-2 border-orange-200 mb-4" placeholder="Your secret protocol..."></textarea>
                    <button onclick="lock()" class="bg-orange-500 text-white px-8 py-3 round-box font-bold">SAVE & LOCK</button>
                </div>
            </div>

            <div id="reports-section" class="hidden glass-card p-10 shadow-2xl">
                <div class="flex justify-between items-center mb-6 no-print">
                    <h3 class="text-2xl font-bold text-sky-700 hacker-font">üìä Reports</h3>
                    <div class="flex gap-2">
                        <button onclick="window.print()" class="bg-sky-500 text-white px-4 py-2 round-box font-bold">PRINT</button>
                        <button onclick="sendToTelegram()" class="bg-blue-500 text-white px-4 py-2 round-box font-bold">TELEGRAM</button>
                    </div>
                </div>
                <div id="print-area" class="p-8 bg-white border text-black">
                    <h1 class="text-center font-bold text-xl text-sky-600 border-b pb-4">PROTOCOL REPORT</h1>
                    <p id="report-date-text" class="text-center text-xs my-2"></p>
                    <div id="report-table-container"></div>
                    <div class="mt-6 flex justify-between font-bold border-t pt-4"><span>Total:</span><span id="report-total-val"></span></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let totalEarn = localStorage.getItem('v_earn') || 0;
        let expenses = JSON.parse(localStorage.getItem('v_expenses')) || [];
        
        window.onload = () => { 
            typeWriter(); 
            document.getElementById('total-earn').value = totalEarn;
            renderItems(); 
        };

        function typeWriter() {
            const txt = "WELCOME TO PROTOCOL VAULT, PROFESSOR...";
            let i = 0;
            const speed = 50;
            function type() {
                if (i < txt.length) {
                    document.getElementById("greeting").innerHTML += txt.charAt(i);
                    i++;
                    setTimeout(type, speed);
                }
            }
            type();
        }

        function navToPage(n) {
            document.getElementById('page-1').classList.add('hidden');
            document.getElementById('page-2').classList.add('hidden');
            document.getElementById(`page-${n}`).classList.remove('hidden');
        }

        function showSection(id) {
            ['bazar-section', 'locker-section', 'reports-section'].forEach(s => document.getElementById(s).classList.add('hidden'));
            document.getElementById(`${id}-section`).classList.remove('hidden');
        }

        function updateEarn() {
            totalEarn = parseFloat(document.getElementById('total-earn').value) || 0;
            localStorage.setItem('v_earn', totalEarn);
            renderItems();
        }

        function addNewItem() {
            const name = document.getElementById('custom-item-name').value.trim();
            const qty = parseFloat(document.getElementById('new-item-qty').value) || 0;
            const price = parseFloat(document.getElementById('new-item-price').value) || 0;

            if(!name || qty <= 0 || price <= 0) return alert("Professor, please fill all fields correctly!");

            expenses.push({ id: Date.now(), name, qty, price });
            localStorage.setItem('v_expenses', JSON.stringify(expenses));
            
            document.getElementById('custom-item-name').value = '';
            document.getElementById('new-item-qty').value = '';
            document.getElementById('new-item-price').value = '';
            renderItems();
        }

        function renderItems() {
            const listContainer = document.getElementById('item-list');
            listContainer.innerHTML = '';
            let total = 0;

            expenses.forEach(e => {
                const sub = e.qty * e.price;
                total += sub;
                listContainer.innerHTML += `
                    <tr class="border-b border-sky-50">
                        <td class='py-3 font-bold'>${e.name}</td>
                        <td>${e.qty}</td>
                        <td>‡ß≥ ${e.price}</td>
                        <td class='font-bold text-sky-600'>‡ß≥ ${sub.toFixed(2)}</td>
                        <td><button onclick='del(${e.id})' class='text-red-500'>‚úñ</button></td>
                    </tr>`;
            });

            document.getElementById('total-expense-display').innerText = `‡ß≥ ${total.toFixed(2)}`;
            document.getElementById('report-total-val').innerText = `‡ß≥ ${total.toFixed(2)}`;
            document.getElementById('balance-display').innerText = `‡ß≥ ${(totalEarn - total).toFixed(2)}`;
            updateReportTable();
        }

        function del(id) {
            expenses = expenses.filter(e => e.id !== id);
            localStorage.setItem('v_expenses', JSON.stringify(expenses));
            renderItems();
        }

        function updateReportTable() {
            let h = `<table class='w-full border-collapse mt-4 text-sm'><tr class='bg-sky-50'><th class='p-2 border'>Item</th><th class='p-2 border text-right'>Total</th></tr>`;
            expenses.forEach(e => { h += `<tr><td class='p-2 border'>${e.name} (${e.qty})</td><td class='p-2 border text-right'>‡ß≥ ${e.qty * e.price}</td></tr>`; });
            h += `</table>`;
            document.getElementById('report-table-container').innerHTML = h;
            document.getElementById('report-date-text').innerText = "Generated: " + new Date().toLocaleString();
        }

        function unlock() {
            if(document.getElementById('lock-pass').value === '0036') {
                document.getElementById('lock-screen').classList.add('hidden');
                document.getElementById('lock-content').classList.remove('hidden');
                document.getElementById('private-note').value = localStorage.getItem('v_note') || '';
            } else { alert("ACCESS DENIED!"); }
        }

        function lock() {
            localStorage.setItem('v_note', document.getElementById('private-note').value);
            document.getElementById('lock-screen').classList.remove('hidden');
            document.getElementById('lock-content').classList.add('hidden');
            document.getElementById('lock-pass').value = '';
        }

        function sendToTelegram() {
            const botToken = "8582534427:AAHq4TfwFqBIy1wU9mp6bDNQGSeSD49yX94";
            const chatId = "682844989";
            let msg = "üìä *VAULT PROTOCOL REPORT*\n--------------------------\n";
            expenses.forEach(e => { msg += `üîπ ${e.name}: ${e.qty * e.price} TK\n`; });
            msg += `--------------------------\nüí∞ *Total:* ${document.getElementById('total-expense-display').innerText}\nüìÖ ${new Date().toLocaleString()}`;
            
            fetch(`https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(msg)}&parse_mode=Markdown`)
            .then(res => res.ok ? alert("üöÄ Sent to Telegram!") : alert("‚ùå Error"));
        }
    </script>
</body>
</html>
